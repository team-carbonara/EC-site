<div class="l-main_container">
  <div class="m-page_title">
    <h2 class="cart-puroduct_title">注文履歴詳細</h2>
  </div>

  <table class="admin-orders_show_table">
    <%= render 'order', orders: @orders %>
  </table>

  <div class="admin-orders_show_column">
    <table class="admin-orders_show_product_table">
      <tr class="admin-orders_show_product_table_row">
        <th>商品名</th>
        <th>単価（税込）</th>
        <th>数量</th>
        <th>小計</th>
        <th>制作ステータス</th>

        <% @orders.order_products.each do |order|%>
          <%= form_with model: order ,url: admin_order_product_path(order.id) ,method: :patch ,local: true  do |f| %>
      </tr>

      <tr class="admin-orders_show_product_table_row">
        <td><%= order.created_at.strftime('%Y/%m/%d') %></td>
        <td><%= order.product.name %></td>
        <td><%= order.quantity %></td>
        <td><%= order.product.add_tax_price %></td>
        <td>
        <%= f.select :production_status , OrderProduct.production_statuses.keys.map %>
        <%= f.submit '変更', class: "cart-product_update_btn" %>
        </td>
      </tr>
        <% end %>
      <% end %>
    </table>

    <table class="admin-orders_show_price_table">
      <tr class="admin-orders_show_price_table_row">
        <th>商品合計</th>
        <td><%= @orders.total_price %></td>
      </tr>
      <tr class="admin-orders_show_price_table_row">
        <th>送料</th>
        <td><%= @orders.postage %></td>
      </tr>
      <tr class="admin-orders_show_price_table_row">
        <th>請求金額合計</th>
        <td><%= @orders.total_price+@orders.postage   %></td>
      </tr>
    </table>
  </div>
</div>
